{"ast":null,"code":"import _slicedToArray from\"D:/GitProjects/Manthan/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import MetaTags from\"react-meta-tags\";import React,{useEffect,useState}from\"react\";import{Row,Col,Alert,Container,Label,Button}from\"reactstrap\";//redux\nimport{useSelector,useDispatch}from\"react-redux\";import{withRouter,Link,useHistory}from\"react-router-dom\";// availity-reactstrap-validation\nimport{AvForm,AvField}from\"availity-reactstrap-validation\";/// tsdfddf Punam demotest\n// actions\nimport{getUserDetailsAction,loginUser,roleAceessAction}from\"../../store/actions\";// import images\nimport logo from\"../../assets/images/logo-sm.svg\";//Import config\nimport CarouselPage from\"./CarouselPage\";import Select from\"react-select\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SelectDivisionPage=function SelectDivisionPage(props){var dispatch=useDispatch();var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),divisionDropdowSelect=_useState2[0],setDivisionDropdowSelect=_useState2[1];var _useSelector=useSelector(function(state){return{loginError:state.Login.loginError,divisionDropdown_redux:state.Login.divisionDropdown};}),loginError=_useSelector.loginError,divisionDropdown_redux=_useSelector.divisionDropdown_redux;useEffect(function(){if(!localStorage.getItem(\"userId\")){history.push(\"/login\");}else{dispatch(getUserDetailsAction(localStorage.getItem(\"userId\")));}},[]);useEffect(function(){if(divisionDropdown_redux.length===1){var value=divisionDropdown_redux[0];var employee=value.Employee_id;var party=value.Party_id;if(party===null){party=0;value.Party_id=0;}localStorage.setItem(\"roleId\",JSON.stringify(value));dispatch(roleAceessAction(party,employee));history.push(\"/dashboard\");}},[divisionDropdown_redux]);// const divisionDropdown_DropdownOption = divisionDropdown_redux.filter((d) => {\n//   return !(d.Role_id === null)\n// }).map((d) => ({\n//   value: d.Employee_id,\n//   label: d.PartyName,\n// }));\nvar divisionDropdown_DropdownOption=divisionDropdown_redux.map(function(d,key){return{value:key,label:d.PartyName};});function goButtonHandller(){var value=divisionDropdown_redux[divisionDropdowSelect.value];var employee=value.Employee_id;var party=value.Party_id;localStorage.setItem(\"roleId\",JSON.stringify(value));dispatch(roleAceessAction(party,employee));history.push(\"/dashboard\");}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Login | FoodERP Live\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsx(Container,{fluid:true,className:\"p-0\",children:/*#__PURE__*/_jsxs(Row,{className:\"g-0\",children:[/*#__PURE__*/_jsx(Col,{lg:4,md:5,className:\"col-xxl-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-full-page-content d-flex p-sm-5 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 mb-md-5 text-center\",children:/*#__PURE__*/_jsxs(Link,{to:\"/dashboard\",className:\"d-block auth-logo\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\",height:\"28\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"logo-txt\",children:\"FoodERP\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-content my-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Welcome !\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mt-2\",children:\"Select Role to Continue FoodERP.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Select,{value:divisionDropdowSelect,options:divisionDropdown_DropdownOption,autoComplete:\"off\",onChange:function onChange(e){setDivisionDropdowSelect(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-success bg\",onClick:function onClick(){goButtonHandller();},children:\"GO\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 mt-md-5 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"\\xA9 \",new Date().getFullYear(),\" Minia . Crafted with \",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-heart text-danger\"}),\" by Themesbrand\"]})})]})})})}),/*#__PURE__*/_jsx(CarouselPage,{})]})})})]});};export default SelectDivisionPage;","map":{"version":3,"names":["MetaTags","React","useEffect","useState","Row","Col","Alert","Container","Label","Button","useSelector","useDispatch","withRouter","Link","useHistory","AvForm","AvField","getUserDetailsAction","loginUser","roleAceessAction","CarouselPage","Select","SelectDivisionPage","props","dispatch","history","divisionDropdowSelect","setDivisionDropdowSelect","state","loginError","Login","divisionDropdown_redux","divisionDropdown","localStorage","getItem","push","length","value","employee","Employee_id","party","Party_id","setItem","JSON","stringify","divisionDropdown_DropdownOption","map","d","key","label","PartyName","goButtonHandller","logo","e","Date","getFullYear"],"sources":["D:/GitProjects/Manthan/src/pages/Authentication/SelectDivisionPage.js"],"sourcesContent":["import PropTypes from \"prop-types\"\r\nimport MetaTags from \"react-meta-tags\"\r\nimport React, { useEffect, useState } from \"react\"\r\n\r\nimport { Row, Col, Alert, Container, Label, Button } from \"reactstrap\"\r\n\r\n//redux\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\n\r\nimport { withRouter, Link, useHistory } from \"react-router-dom\"\r\n\r\n// availity-reactstrap-validation\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\"\r\n\r\n\r\n/// tsdfddf Punam demotest\r\n// actions\r\nimport { getUserDetailsAction, loginUser, roleAceessAction } from \"../../store/actions\"\r\n\r\n// import images\r\nimport logo from \"../../assets/images/logo-sm.svg\"\r\n\r\n//Import config\r\nimport CarouselPage from \"./CarouselPage\"\r\nimport Select from \"react-select\";\r\n\r\nconst SelectDivisionPage = props => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory();\r\n\r\n  const [divisionDropdowSelect, setDivisionDropdowSelect] = useState([]);\r\n\r\n  const { loginError, divisionDropdown_redux } = useSelector(state => ({\r\n    loginError: state.Login.loginError,\r\n    divisionDropdown_redux: state.Login.divisionDropdown,\r\n  }))\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (!(localStorage.getItem(\"userId\"))) {\r\n      history.push(\"/login\")\r\n\r\n    }\r\n    else {\r\n      dispatch(getUserDetailsAction(localStorage.getItem(\"userId\")))\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n\r\n    if (divisionDropdown_redux.length === 1) {\r\n\r\n      let value = divisionDropdown_redux[0]\r\n      let employee = value.Employee_id;\r\n      let party = value.Party_id\r\n      if((party===null)){\r\n        party=0;\r\n        value.Party_id=0\r\n      }\r\n\r\n\r\n      localStorage.setItem(\"roleId\", JSON.stringify(value))\r\n      dispatch(roleAceessAction(party, employee))\r\n      history.push(\"/dashboard\")\r\n    }\r\n  }, [divisionDropdown_redux])\r\n\r\n\r\n  // const divisionDropdown_DropdownOption = divisionDropdown_redux.filter((d) => {\r\n  //   return !(d.Role_id === null)\r\n  // }).map((d) => ({\r\n  //   value: d.Employee_id,\r\n  //   label: d.PartyName,\r\n  // }));\r\n\r\n  const divisionDropdown_DropdownOption = divisionDropdown_redux.map((d, key) => ({\r\n    value: key,\r\n    label: d.PartyName,\r\n  }));\r\n\r\n  function goButtonHandller() {\r\n\r\n    let value = divisionDropdown_redux[divisionDropdowSelect.value]\r\n    var employee = value.Employee_id;\r\n    var party = value.Party_id\r\n\r\n    localStorage.setItem(\"roleId\", JSON.stringify(value))\r\n    dispatch(roleAceessAction(party, employee))\r\n    history.push(\"/dashboard\")\r\n\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <MetaTags>\r\n        <title>Login | FoodERP Live</title>\r\n      </MetaTags>\r\n      <div className=\"auth-page\">\r\n        <Container fluid className=\"p-0\">\r\n          <Row className=\"g-0\">\r\n            <Col lg={4} md={5} className=\"col-xxl-3\">\r\n              <div className=\"auth-full-page-content d-flex p-sm-5 p-4\">\r\n                <div className=\"w-100\">\r\n                  <div className=\"d-flex flex-column h-100\">\r\n                    <div className=\"mb-4 mb-md-5 text-center\">\r\n                      <Link to=\"/dashboard\" className=\"d-block auth-logo\">\r\n                        <img src={logo} alt=\"\" height=\"28\" /> <span className=\"logo-txt\">FoodERP</span>\r\n                      </Link>\r\n                    </div>\r\n                    <div className=\"auth-content my-auto\">\r\n                      <div className=\"text-center\">\r\n                        <h5 className=\"mb-0\">Welcome !</h5>\r\n                        <p className=\"text-muted mt-2\">Select Role to Continue FoodERP.</p>\r\n                      </div>\r\n\r\n\r\n                      <div className=\"mb-3\">\r\n                        {/* <Label className=\"form-label font-size-13 \"></Label> */}\r\n                        <Select\r\n                          value={divisionDropdowSelect}\r\n                          options={divisionDropdown_DropdownOption}\r\n                          autoComplete=\"off\"\r\n                          onChange={(e) => {\r\n                            setDivisionDropdowSelect(e);\r\n                          }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"text-center\">\r\n                        <Button className=\"btn btn-success bg\" onClick={() => {\r\n                          goButtonHandller()\r\n                        }}>GO</Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-4 mt-md-5 text-center\">\r\n                      <p className=\"mb-0\">© {new Date().getFullYear()} Minia . Crafted with <i className=\"mdi mdi-heart text-danger\"></i> by Themesbrand</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n            <CarouselPage />\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SelectDivisionPage\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}